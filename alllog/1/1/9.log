    usesift = False bruteForce()
testdoublekmeansHnswV2()
<class 'h5py._hl.files.File'>
<KeysViewHDF5 ['distances', 'neighbors', 'test', 'train']>
type(tmp),tmp[0:100],tmp.shape <class 'numpy.ndarray'> [[31]
 [43]
 [28]
 [33]
 [44]] (60000, 1) (60000, 3)
centroids1 (8, 784)
centroids2 (80, 784)
processQueryVecv2 globaIndexDf.shape  (2999, 3)
print(curdf[0]),curdf.shape (2999,) <class 'pandas.core.series.Series'>
start query
result.count() 100
end query
l 100 k 10
recall = cnt/float(l*k) 403   l 100 k 10
recall: 0.403
totalconstructtime 27537.684440612793 kmeanspartitiontime 3773.3442783355713 localindexconstructtime 23145.512580871582 globalindexconstructtime 618.8275814056396
totalsearchtime 11575.696468353271 localsearchtime 11561.64288520813 globalsearchtime 14.053583145141602
hello world testdoublekmeansHnsw

testdoublekmeansHnswV2() usesift = False
<class 'h5py._hl.files.File'>
<KeysViewHDF5 ['distances', 'neighbors', 'test', 'train']>
type(tmp),tmp[0:100],tmp.shape <class 'numpy.ndarray'> [[31]
 [43]
 [28]
 [33]
 [44]] (60000, 1) (60000, 3)
centroids1 (8, 784)
centroids2 (80, 784)
processQueryVecv2 globaIndexDf.shape  (2999, 3)
print(curdf[0]),curdf.shape (2999,) <class 'pandas.core.series.Series'>
start query
result.count() 100
end query
l 100 k 10
recall = cnt/float(l*k) 404   l 100 k 10
recall: 0.404
totalconstructtime 22031.999349594116 kmeanspartitiontime 2691.2858486175537 localindexconstructtime 19088.38725090027 globalindexconstructtime 252.32625007629395
totalsearchtime 5879.0123462677 localsearchtime 5877.440929412842 globalsearchtime 1.5714168548583984
hello world testdoublekmeansHnsw

maxelement = 100000000
k=10
partitionnum=8
topkPartitionNum=3

sc = 1
m = int(50)
distanceFunction='cosine'
kmeanstrainrate=0.05

efConstruction=35
ef = int(4*22)
usesift=True

kmeanspath="/aknn/kmeans/"

gistlist=["gistpartition.csv","gistcentroids2.csv","gistcentroids1.csv"]  
siftlist=["siftpartition.csv","siftcentroids1.csv","siftcentroids2.csv"]

"""
datapath="/my/siftsmall/"
traindatapath=datapath+"siftsmall_base.fvecs"
querydatapath=datapath+"siftsmall_query.fvecs"
querygroundtruthpath=datapath+"siftsmall_groundtruth.ivecs"
"""
datapath="/data/"
traindatapath=datapath+"sift_base.fvecs"
querydatapath=datapath+"sift_query.fvecs"
querygroundtruthpath=datapath+"sift_groundtruth.ivecs"


gistpath="/data/mnist.hdf5"
# ef=10, efConstruction=200


def initparams():
    global maxelement,k,partitionnum,topkPartitionNum,ef,m,distanceFunction,kmeanstrainraten,efConstruction,usesift
    maxelement = 100000000
    k=10
    partitionnum=8
    topkPartitionNum=5
    
    sc = 1
    m = int(50)
    distanceFunction='cosine'
    kmeanstrainrate=0.05
    efConstruction=85
    ef = efConstruction
    usesift=Truerecall = cnt/float(l*k) 403   l 100 k 10
recall: 0.403
recall = cnt/float(l*k) 404   l 100 k 10
recall: 0.404

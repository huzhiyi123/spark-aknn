gist efConstruction 

for i in efConstructionlist: cmp 20
type(tmp),tmp[0:100],tmp.shape <class 'numpy.ndarray'> [[20]
 [13]
 [13]
 [13]
 [28]] (1000000, 1) (1000000, 3)
centroids1 (5, 128)
centroids2 (41, 128)
print(curdf[0]),curdf.shape (50000,) <class 'pandas.core.series.Series'>
start query
result.count() 10000
end query
l 10000 k 10
recall = cnt/float(l*k) 79302   l 10000 k 10
recall: 0.79302
totalconstructtime 253517.34495162964 kmeanspartitiontime 16163.053750991821 localindexconstructtime 235899.2998600006 globalindexconstructtime 1454.991340637207
totalsearchtime 13427.860975265503 localsearchtime 13299.562454223633 globalsearchtime 128.29852104187012
hello world testdoublekmeansHnsw

for i in efConstructionlist: cmp 100
type(tmp),tmp[0:100],tmp.shape <class 'numpy.ndarray'> [[20]
 [13]
 [13]
 [13]
 [28]] (1000000, 1) (1000000, 3)
centroids1 (5, 128)
centroids2 (41, 128)
print(curdf[0]),curdf.shape (50000,) <class 'pandas.core.series.Series'>
start query
result.count() 10000
end query
l 10000 k 10
recall = cnt/float(l*k) 92410   l 10000 k 10
recall: 0.9241
totalconstructtime 482715.2051925659 kmeanspartitiontime 10029.649019241333 localindexconstructtime 471129.1244029999 globalindexconstructtime 1556.431770324707
totalsearchtime 26517.313241958618 localsearchtime 26381.446838378906 globalsearchtime 135.8664035797119
hello world testdoublekmeansHnsw

for i in efConstructionlist: cmp 200
type(tmp),tmp[0:100],tmp.shape <class 'numpy.ndarray'> [[20]
 [13]
 [13]
 [13]
 [28]] (1000000, 1) (1000000, 3)
centroids1 (5, 128)
centroids2 (41, 128)
print(curdf[0]),curdf.shape (50000,) <class 'pandas.core.series.Series'>
start query
result.count() 10000
end query
l 10000 k 10
recall = cnt/float(l*k) 92880   l 10000 k 10
recall: 0.9288
totalconstructtime 952359.5728874207 kmeanspartitiontime 12318.050146102905 localindexconstructtime 938485.2087497711 globalindexconstructtime 1556.3139915466309
totalsearchtime 45548.94232749939 localsearchtime 45406.80122375488 globalsearchtime 142.14110374450684
hello world testdoublekmeansHnsw

maxelement = 100000000
k=10
partitionnum=8
topkPartitionNum=3

sc = 1
m = int(50)
distanceFunction='cosine'
kmeanstrainrate=0.05

efConstruction=35
ef = int(4*22)
usesift=True

kmeanspath="/aknn/kmeans/"

gistlist=["gistpartition.csv","gistcentroids2.csv","gistcentroids1.csv"]  
siftlist=["siftpartition.csv","siftcentroids1.csv","siftcentroids2.csv"]

"""
datapath="/my/siftsmall/"
traindatapath=datapath+"siftsmall_base.fvecs"
querydatapath=datapath+"siftsmall_query.fvecs"
querygroundtruthpath=datapath+"siftsmall_groundtruth.ivecs"
"""
datapath="/data/"
traindatapath=datapath+"sift_base.fvecs"
querydatapath=datapath+"sift_query.fvecs"
querygroundtruthpath=datapath+"sift_groundtruth.ivecs"


gistpath="/data/mnist.hdf5"
# ef=10, efConstruction=200


def initparams():
    global maxelement,k,partitionnum,topkPartitionNum,ef,m,distanceFunction,kmeanstrainraten,efConstruction,usesift
    maxelement = 100000000
    k=10
    partitionnum=4
    topkPartitionNum=3
    sc = 1
    m = int(50)
    distanceFunction='cosine'
    kmeanstrainrate=0.05
    efConstruction=85
    ef = efConstruction
    usesift=Truerecall = cnt/float(l*k) 79302   l 10000 k 10
recall: 0.79302
recall = cnt/float(l*k) 92410   l 10000 k 10
recall: 0.9241
recall = cnt/float(l*k) 92880   l 10000 k 10
recall: 0.9288

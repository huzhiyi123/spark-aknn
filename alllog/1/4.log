for i in efConstructionlist:
efConstruction cmp 20
/my/spark-aknn/test/testdoublekmeans.py
    id  ... mappartition
0    0  ...            1
1    1  ...            4
2    2  ...            1
3    3  ...            4
4    4  ...            1
5    5  ...            1
6    6  ...            1
7    7  ...            1
8    8  ...            3
9    9  ...            1
10  10  ...            1
11  11  ...            1
12  12  ...            1
13  13  ...            7
14  14  ...            4
15  15  ...            1
16  16  ...            4
17  17  ...            1
18  18  ...            1
19  19  ...            1

[20 rows x 4 columns]
start query
result.count() 10000
end query
l 10000 k 10
recall = cnt/float(l*k) 93548   l 10000 k 10
recall: 0.93548
totalconstructtime 238724.7486114502 kmeanspartitiontime 143515.2564048767 localindexconstructtime 92397.05300331116 globalindexconstructtime 2812.439203262329
totalsearchtime 31765.339374542236 localsearchtime 31604.872226715088 globalsearchtime 160.46714782714844
hello world testdoublekmeansHnsw

efConstruction cmp 40
/my/spark-aknn/test/testdoublekmeans.py
    id  ... mappartition
0    0  ...            1
1    1  ...            4
2    2  ...            1
3    3  ...            4
4    4  ...            1
5    5  ...            1
6    6  ...            1
7    7  ...            1
8    8  ...            3
9    9  ...            1
10  10  ...            1
11  11  ...            1
12  12  ...            1
13  13  ...            7
14  14  ...            4
15  15  ...            1
16  16  ...            4
17  17  ...            1
18  18  ...            1
19  19  ...            1

[20 rows x 4 columns]
start query
result.count() 10000
end query
l 10000 k 10
recall = cnt/float(l*k) 96392   l 10000 k 10
recall: 0.96392
totalconstructtime 275020.9698677063 kmeanspartitiontime 142153.45907211304 localindexconstructtime 130063.92049789429 globalindexconstructtime 2803.5902976989746
totalsearchtime 34085.84666252136 localsearchtime 33928.15804481506 globalsearchtime 157.68861770629883
hello world testdoublekmeansHnsw

efConstruction cmp 80
/my/spark-aknn/test/testdoublekmeans.py
    id  ... mappartition
0    0  ...            1
1    1  ...            4
2    2  ...            1
3    3  ...            4
4    4  ...            1
5    5  ...            1
6    6  ...            1
7    7  ...            1
8    8  ...            3
9    9  ...            1
10  10  ...            1
11  11  ...            1
12  12  ...            1
13  13  ...            7
14  14  ...            4
15  15  ...            1
16  16  ...            4
17  17  ...            1
18  18  ...            1
19  19  ...            1

[20 rows x 4 columns]
start query
result.count() 10000
end query
l 10000 k 10
recall = cnt/float(l*k) 98075   l 10000 k 10
recall: 0.98075
totalconstructtime 382604.85315322876 kmeanspartitiontime 145073.04120063782 localindexconstructtime 234744.5776462555 globalindexconstructtime 2787.234306335449
totalsearchtime 35250.91052055359 localsearchtime 35093.69492530823 globalsearchtime 157.21559524536133
hello world testdoublekmeansHnsw

efConstruction cmp 200
/my/spark-aknn/test/testdoublekmeans.py
    id  ... mappartition
0    0  ...            1
1    1  ...            4
2    2  ...            1
3    3  ...            4
4    4  ...            1
5    5  ...            1
6    6  ...            1
7    7  ...            1
8    8  ...            3
9    9  ...            1
10  10  ...            1
11  11  ...            1
12  12  ...            1
13  13  ...            7
14  14  ...            4
15  15  ...            1
16  16  ...            4
17  17  ...            1
18  18  ...            1
19  19  ...            1

[20 rows x 4 columns]
start query
result.count() 10000
end query
l 10000 k 10
recall = cnt/float(l*k) 98714   l 10000 k 10
recall: 0.98714
totalconstructtime 653141.3793563843 kmeanspartitiontime 142385.88452339172 localindexconstructtime 507944.44942474365 globalindexconstructtime 2811.0454082489014
totalsearchtime 36820.42121887207 localsearchtime 36665.136098861694 globalsearchtime 155.28512001037598
hello world testdoublekmeansHnsw

end efConstructionlist
 [20, 40, 80, 200]
maxelement = 100000000
k=10
partitionnum=8
topkPartitionNum=3
ef = int(4*22)
sc = 1
m = int(25)
distanceFunction='cosine'
kmeanstrainrate=0.05
efConstruction=200

"""
datapath="/my/siftsmall/"
traindatapath=datapath+"siftsmall_base.fvecs"
querydatapath=datapath+"siftsmall_query.fvecs"
querygroundtruthpath=datapath+"siftsmall_groundtruth.ivecs"
"""
datapath="/my/sift/"
traindatapath=datapath+"sift_base.fvecs"
querydatapath=datapath+"sift_query.fvecs"
querygroundtruthpath=datapath+"sift_groundtruth.ivecs"
# ef=10, efConstruction=200


def initparams():
    global maxelement,k,partitionnum,topkPartitionNum,ef,m,distanceFunction,kmeanstrainraten,efConstruction
    maxelement = 100000000
    k=10
    partitionnum=8
    topkPartitionNum=3
    ef = int(4*22)
    sc = 1
    m = int(25)
    distanceFunction='cosine'
    kmeanstrainrate=0.05
    efConstruction=200
recall = cnt/float(l*k) 93548   l 10000 k 10
recall: 0.93548
recall = cnt/float(l*k) 96392   l 10000 k 10
recall: 0.96392
recall = cnt/float(l*k) 98075   l 10000 k 10
recall: 0.98075
recall = cnt/float(l*k) 98714   l 10000 k 10
recall: 0.98714

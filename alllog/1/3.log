for i in efConstructionlist:
efConstruction cmp 20
/my/spark-aknn/test/testdoublekmeans.py
    id  ... mappartition
0    0  ...            1
1    1  ...            4
2    2  ...            1
3    3  ...            4
4    4  ...            1
5    5  ...            1
6    6  ...            1
7    7  ...            1
8    8  ...            3
9    9  ...            1
10  10  ...            1
11  11  ...            1
12  12  ...            1
13  13  ...            7
14  14  ...            4
15  15  ...            1
16  16  ...            4
17  17  ...            1
18  18  ...            1
19  19  ...            1

[20 rows x 4 columns]
start query
result.count() 10000
end query
l 10000 k 10
recall = cnt/float(l*k) 98170   l 10000 k 10
recall: 0.9817
totalconstructtime 390814.2099380493 kmeanspartitiontime 141804.438829422 localindexconstructtime 246206.89821243286 globalindexconstructtime 2802.872896194458
totalsearchtime 32820.02353668213 localsearchtime 32664.100885391235 globalsearchtime 155.92265129089355
hello world testdoublekmeansHnsw

efConstruction cmp 40
/my/spark-aknn/test/testdoublekmeans.py
    id  ... mappartition
0    0  ...            1
1    1  ...            4
2    2  ...            1
3    3  ...            4
4    4  ...            1
5    5  ...            1
6    6  ...            1
7    7  ...            1
8    8  ...            3
9    9  ...            1
10  10  ...            1
11  11  ...            1
12  12  ...            1
13  13  ...            7
14  14  ...            4
15  15  ...            1
16  16  ...            4
17  17  ...            1
18  18  ...            1
19  19  ...            1

[20 rows x 4 columns]
start query
result.count() 10000
end query
l 10000 k 10
recall = cnt/float(l*k) 98143   l 10000 k 10
recall: 0.98143
totalconstructtime 395751.44386291504 kmeanspartitiontime 142343.65034103394 localindexconstructtime 250259.65690612793 globalindexconstructtime 3148.136615753174
totalsearchtime 32394.601345062256 localsearchtime 32230.222940444946 globalsearchtime 164.37840461730957
hello world testdoublekmeansHnsw

efConstruction cmp 80
/my/spark-aknn/test/testdoublekmeans.py
    id  ... mappartition
0    0  ...            1
1    1  ...            4
2    2  ...            1
3    3  ...            4
4    4  ...            1
5    5  ...            1
6    6  ...            1
7    7  ...            1
8    8  ...            3
9    9  ...            1
10  10  ...            1
11  11  ...            1
12  12  ...            1
13  13  ...            7
14  14  ...            4
15  15  ...            1
16  16  ...            4
17  17  ...            1
18  18  ...            1
19  19  ...            1

[20 rows x 4 columns]
start query
result.count() 10000
end query
l 10000 k 10
recall = cnt/float(l*k) 98163   l 10000 k 10
recall: 0.98163
totalconstructtime 393319.00238990784 kmeanspartitiontime 142892.094373703 localindexconstructtime 247629.6625137329 globalindexconstructtime 2797.245502471924
totalsearchtime 32157.488107681274 localsearchtime 31997.357606887817 globalsearchtime 160.13050079345703
hello world testdoublekmeansHnsw

efConstruction cmp 200
/my/spark-aknn/test/testdoublekmeans.py
    id  ... mappartition
0    0  ...            1
1    1  ...            4
2    2  ...            1
3    3  ...            4
4    4  ...            1
5    5  ...            1
6    6  ...            1
7    7  ...            1
8    8  ...            3
9    9  ...            1
10  10  ...            1
11  11  ...            1
12  12  ...            1
13  13  ...            7
14  14  ...            4
15  15  ...            1
16  16  ...            4
17  17  ...            1
18  18  ...            1
19  19  ...            1

[20 rows x 4 columns]
start query
result.count() 10000
end query
l 10000 k 10
recall = cnt/float(l*k) 98249   l 10000 k 10
recall: 0.98249
totalconstructtime 398519.8142528534 kmeanspartitiontime 142968.11699867249 localindexconstructtime 252748.12126159668 globalindexconstructtime 2803.5759925842285
totalsearchtime 32159.717559814453 localsearchtime 32004.22239303589 globalsearchtime 155.49516677856445
hello world testdoublekmeansHnsw

end efConstructionlist
 [20, 40, 80, 200]
maxelement = 100000000
k=10
partitionnum=8
topkPartitionNum=3
ef = int(4*22)
sc = 1
m = int(25)
distanceFunction='cosine'
kmeanstrainrate=0.05
efConstruction=200

"""
datapath="/my/siftsmall/"
traindatapath=datapath+"siftsmall_base.fvecs"
querydatapath=datapath+"siftsmall_query.fvecs"
querygroundtruthpath=datapath+"siftsmall_groundtruth.ivecs"
"""
datapath="/my/sift/"
traindatapath=datapath+"sift_base.fvecs"
querydatapath=datapath+"sift_query.fvecs"
querygroundtruthpath=datapath+"sift_groundtruth.ivecs"
# ef=10, efConstruction=200


def initparams():
    global maxelement,k,partitionnum,topkPartitionNum,ef,m,distanceFunction,kmeanstrainraten,efConstruction
    maxelement = 100000000
    k=10
    partitionnum=8
    topkPartitionNum=3
    ef = int(4*22)
    sc = 1
    m = int(25)
    distanceFunction='cosine'
    kmeanstrainrate=0.05
    efConstruction=200
recall = cnt/float(l*k) 98170   l 10000 k 10
recall: 0.9817
recall = cnt/float(l*k) 98143   l 10000 k 10
recall: 0.98143
recall = cnt/float(l*k) 98163   l 10000 k 10
recall: 0.98163
recall = cnt/float(l*k) 98249   l 10000 k 10
recall: 0.98249

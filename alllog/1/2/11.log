/aknn/test/maintest.py
maxelement,k,partitionnum,topkPartitionNum,ef,m,distanceFunction,kmeanstrainrate,efConstruction,usesift:
 100000000 10 8 3 88 50 cosine 0.05 35 True
efConstruction cmp 12
root
 |-- id: integer (nullable = true)
 |-- normalized_features: array (nullable = true)
 |    |-- element: double (containsNull = true)

+---+--------------------+
| id| normalized_features|
+---+--------------------+
|  0|[1.0, 3.0, 11.0, ...|
|  1|[40.0, 25.0, 11.0...|
|  2|[28.0, 4.0, 3.0, ...|
|  3|[24.0, 12.0, 14.0...|
|  4|[0.0, 4.0, 47.0, ...|
|  5|[16.0, 52.0, 32.0...|
|  6|[21.0, 17.0, 52.0...|
|  7|[3.0, 1.0, 0.0, 1...|
|  8|[1.0, 12.0, 4.0, ...|
|  9|[0.0, 11.0, 77.0,...|
| 10|[7.0, 4.0, 5.0, 1...|
| 11|[50.0, 43.0, 9.0,...|
| 12|[1.0, 1.0, 6.0, 4...|
| 13|[9.0, 1.0, 0.0, 2...|
| 14|[12.0, 6.0, 1.0, ...|
| 15|[15.0, 17.0, 36.0...|
| 16|[18.0, 38.0, 20.0...|
| 17|[1.0, 21.0, 20.0,...|
| 18|[16.0, 15.0, 5.0,...|
| 19|[3.0, 0.0, 0.0, 0...|
+---+--------------------+
only showing top 20 rows

(result.count()) 10000
searchtimeUsed:  19874.452352523804
constructtimeUsed:  140684.3647956848
l 10000 k 10
recall = cnt/float(l*k) 90029   l 10000 k 10
recall: 0.90029
maxelement = 100000000
k=10
partitionnum=8
topkPartitionNum=3

sc = 1
m = int(50)
distanceFunction='cosine'
kmeanstrainrate=0.05

efConstruction=35
ef = int(4*22)
usesift=True

kmeanspath="/aknn/kmeans/"

gistlist=["gistpartition.csv","gistcentroids2.csv","gistcentroids1.csv"]  
siftlist=["siftpartition.csv","siftcentroids1.csv","siftcentroids2.csv"]

"""
datapath="/my/siftsmall/"
traindatapath=datapath+"siftsmall_base.fvecs"
querydatapath=datapath+"siftsmall_query.fvecs"
querygroundtruthpath=datapath+"siftsmall_groundtruth.ivecs"
"""
datapath="/data/"
traindatapath=datapath+"sift_base.fvecs"
querydatapath=datapath+"sift_query.fvecs"
querygroundtruthpath=datapath+"sift_groundtruth.ivecs"


gistpath="/data/mnist.hdf5"
# ef=10, efConstruction=200


recall = cnt/float(l*k) 90029   l 10000 k 10
recall: 0.90029

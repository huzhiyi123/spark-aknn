for i in efConstructionlist:
efConstruction cmp 20
/my/spark-aknn/test/testdoublekmeans.py
    id  ... mappartition
0    0  ...            1
1    1  ...            4
2    2  ...            1
3    3  ...            4
4    4  ...            1
5    5  ...            1
6    6  ...            1
7    7  ...            1
8    8  ...            3
9    9  ...            1
10  10  ...            1
11  11  ...            1
12  12  ...            1
13  13  ...            7
14  14  ...            4
15  15  ...            1
16  16  ...            4
17  17  ...            1
18  18  ...            1
19  19  ...            1

[20 rows x 4 columns]
start query
result.count() 10000
end query
l 10000 k 10
recall = cnt/float(l*k) 98147   l 10000 k 10
recall: 0.98147
totalconstructtime 387102.6360988617 kmeanspartitiontime 139812.4988079071 localindexconstructtime 244235.02731323242 globalindexconstructtime 3055.109977722168
totalsearchtime 32409.183979034424 localsearchtime 32246.46782875061 globalsearchtime 162.71615028381348
hello world testdoublekmeansHnsw

efConstruction cmp 40
/my/spark-aknn/test/testdoublekmeans.py
    id  ... mappartition
0    0  ...            1
1    1  ...            4
2    2  ...            1
3    3  ...            4
4    4  ...            1
5    5  ...            1
6    6  ...            1
7    7  ...            1
8    8  ...            3
9    9  ...            1
10  10  ...            1
11  11  ...            1
12  12  ...            1
13  13  ...            7
14  14  ...            4
15  15  ...            1
16  16  ...            4
17  17  ...            1
18  18  ...            1
19  19  ...            1

[20 rows x 4 columns]
start query
result.count() 10000
end query
l 10000 k 10
recall = cnt/float(l*k) 98180   l 10000 k 10
recall: 0.9818
totalconstructtime 384287.7588272095 kmeanspartitiontime 140703.4296989441 localindexconstructtime 240643.12410354614 globalindexconstructtime 2941.2050247192383
totalsearchtime 32617.090463638306 localsearchtime 32457.040071487427 globalsearchtime 160.0503921508789
hello world testdoublekmeansHnsw

efConstruction cmp 80
/my/spark-aknn/test/testdoublekmeans.py
    id  ... mappartition
0    0  ...            1
1    1  ...            4
2    2  ...            1
3    3  ...            4
4    4  ...            1
5    5  ...            1
6    6  ...            1
7    7  ...            1
8    8  ...            3
9    9  ...            1
10  10  ...            1
11  11  ...            1
12  12  ...            1
13  13  ...            7
14  14  ...            4
15  15  ...            1
16  16  ...            4
17  17  ...            1
18  18  ...            1
19  19  ...            1

[20 rows x 4 columns]
start query
result.count() 10000
end query
l 10000 k 10
recall = cnt/float(l*k) 98166   l 10000 k 10
recall: 0.98166
totalconstructtime 393522.2840309143 kmeanspartitiontime 141598.00720214844 localindexconstructtime 249151.09658241272 globalindexconstructtime 2773.1802463531494
totalsearchtime 31710.82329750061 localsearchtime 31553.73191833496 globalsearchtime 157.0913791656494
hello world testdoublekmeansHnsw

efConstruction cmp 200
/my/spark-aknn/test/testdoublekmeans.py
    id  ... mappartition
0    0  ...            1
1    1  ...            4
2    2  ...            1
3    3  ...            4
4    4  ...            1
5    5  ...            1
6    6  ...            1
7    7  ...            1
8    8  ...            3
9    9  ...            1
10  10  ...            1
11  11  ...            1
12  12  ...            1
13  13  ...            7
14  14  ...            4
15  15  ...            1
16  16  ...            4
17  17  ...            1
18  18  ...            1
19  19  ...            1

[20 rows x 4 columns]
start query
result.count() 10000
end query
l 10000 k 10
recall = cnt/float(l*k) 98130   l 10000 k 10
recall: 0.9813
totalconstructtime 395406.66127204895 kmeanspartitiontime 141426.5627861023 localindexconstructtime 251211.19260787964 globalindexconstructtime 2768.9058780670166
totalsearchtime 32364.54439163208 localsearchtime 32206.714153289795 globalsearchtime 157.83023834228516
hello world testdoublekmeansHnsw

end efConstructionlist
 [20, 40, 80, 200]
maxelement = 100000000
k=10
partitionnum=8
topkPartitionNum=3
ef = int(4*22)
sc = 1
m = int(25)
distanceFunction='cosine'
kmeanstrainrate=0.05
efConstruction=200

"""
datapath="/my/siftsmall/"
traindatapath=datapath+"siftsmall_base.fvecs"
querydatapath=datapath+"siftsmall_query.fvecs"
querygroundtruthpath=datapath+"siftsmall_groundtruth.ivecs"
"""
datapath="/my/sift/"
traindatapath=datapath+"sift_base.fvecs"
querydatapath=datapath+"sift_query.fvecs"
querygroundtruthpath=datapath+"sift_groundtruth.ivecs"
# ef=10, efConstruction=200


def initparams():
    global maxelement,k,partitionnum,topkPartitionNum,ef,m,distanceFunction,kmeanstrainraten,efConstruction
    maxelement = 100000000
    k=10
    partitionnum=8
    topkPartitionNum=3
    ef = int(4*22)
    sc = 1
    m = int(25)
    distanceFunction='cosine'
    kmeanstrainrate=0.05
    efConstruction=200
recall = cnt/float(l*k) 98147   l 10000 k 10
recall: 0.98147
recall = cnt/float(l*k) 98180   l 10000 k 10
recall: 0.9818
recall = cnt/float(l*k) 98166   l 10000 k 10
recall: 0.98166
recall = cnt/float(l*k) 98130   l 10000 k 10
recall: 0.9813
